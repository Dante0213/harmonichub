
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>music-learn-connect</title>
    <meta name="description" content="Lovable Generated Project" />
    <meta name="author" content="Lovable" />
    <meta property="og:image" content="/music-learn-connect/og-image.png" />
    <!-- GitHub Pages 배포를 위한 기본 설정 - 절대 경로 사용 -->
    <base href="/music-learn-connect/" />
    <script type="text/javascript">
      // 디버깅 정보 출력
      console.log('문서 로드 시작');
      console.log('호스트:', window.location.hostname);
      console.log('경로:', window.location.pathname);
      console.log('해시:', window.location.hash);
      
      // GitHub Pages에서 경로 문제 해결을 위한 스크립트
      (function() {
        // sessionStorage에서 리디렉션 경로 확인
        var redirectPath = sessionStorage.getItem('redirect_path');
        if (redirectPath) {
          console.log('리디렉션 경로 발견:', redirectPath);
          
          // 세션 스토리지 초기화
          sessionStorage.removeItem('redirect_path');
          
          // 해시 라우팅 설정
          if (!window.location.hash) {
            window.location.hash = redirectPath;
            console.log('리디렉션 완료:', window.location.href);
          }
        }
        
        // 리소스 경로 접두사 설정 - 정적 자산에 대한 접근 개선
        window.PUBLIC_PATH = '/music-learn-connect/';
        console.log('공개 경로 설정:', window.PUBLIC_PATH);
      })();
    </script>
    <!-- 정적 리소스 로드 실패 디버깅 및 재시도 -->
    <script type="text/javascript">
      window.addEventListener('error', function(e) {
        if (e.target && (e.target.tagName === 'LINK' || e.target.tagName === 'SCRIPT' || e.target.tagName === 'IMG')) {
          console.error('리소스 로드 실패:', e.target.src || e.target.href);
          
          // 상대 경로를 절대 경로로 변환하여 재시도
          var originalSrc = e.target.src || e.target.href;
          if (originalSrc && !originalSrc.startsWith('http') && !originalSrc.startsWith('/music-learn-connect/')) {
            var newSrc = window.PUBLIC_PATH + originalSrc.replace(/^\//, '');
            console.log('재시도 중:', newSrc);
            
            if (e.target.tagName === 'IMG') {
              e.target.src = newSrc;
            } else if (e.target.tagName === 'LINK') {
              e.target.href = newSrc;
            } else if (e.target.tagName === 'SCRIPT') {
              // 스크립트 재로드는 복잡하므로 알림만 표시
              console.log('스크립트 경로 문제 감지:', originalSrc);
            }
          }
        }
      }, true);
    </script>
    <!-- Lovable script tag -->
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="./src/main.tsx"></script>
  </body>
</html>
